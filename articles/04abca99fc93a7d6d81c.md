---
title: ファイルの暗号化したい&&簡単アクセスを両立させる
tags: Linux
author: catatsuy
slide: false
---
Google の 2 段階認証のバックアップコードのように絶対に他人に見られてはいけないが，アクセスしたい時にアクセスできないと困るので Dropbox(https://www.dropbox.com/) や Catch(https://catch.com/) に入れておきたいデータを管理する Tips をお届けします

# 暗号化

`gpg` を使います

    gpg -c ファイル名

とやるとパスフレーズを聞かれるのでできるだけ長いパスフレーズを打ちます  
今回は管理を簡略にするため公開鍵ではなく共通鍵を利用するのでできるだけ長いパスフレーズを心がけてください  
パスフレーズを打つと `ファイル名.gpg` というファイルができます

復号化するときは

    gpg ファイル名

とやるとパスフレーズが聞かれるので答えます

このファイルは Dropbox に突っ込めます

# Base64 エンコード

ファイルだと Catch には突っ込めないので Base64 エンコードします

    base64 ファイル名 > Base64エンコード済みファイル

とやると Base64 エンコードされます
標準出力に吐かれるのでリダイレクトしましょう

この状態なら Catch に貼れます

デコードは

    base64 -d ファイル名 > Base64デコード済みファイル

とやります  
こちらも標準出力に吐かれるのでリダイレクトします

# スクリプトで自動化

`gpg` のパスフレーズ入力をスクリプトで行うには

    echo パスフレーズ | gpg --passphrase-fd 0 --batch -c ファイル名

というようにパイプでパスフレーズを渡してやるとうまく行きます

これで『暗号化』・『お手軽アクセス』を両立できると思います

# まとめ

`gpg` も `base64` も UNIX 環境であれば最初から入っていることが多いと思うのでどこでもお手軽に使えます  
お試しあれ

